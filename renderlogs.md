2025-09-28T09:21:24.072960908Z Using cached websockets-15.0.1-cp313-cp313-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (182 kB)
2025-09-28T09:21:24.074144123Z Using cached google_api_python_client-2.183.0-py3-none-any.whl (14.2 MB)
2025-09-28T09:21:24.085324444Z Using cached google_auth_httplib2-0.2.0-py2.py3-none-any.whl (9.3 kB)
2025-09-28T09:21:24.086379467Z Using cached httplib2-0.31.0-py3-none-any.whl (91 kB)
2025-09-28T09:21:24.087563282Z Using cached pyparsing-3.2.5-py3-none-any.whl (113 kB)
2025-09-28T09:21:24.088721807Z Using cached uritemplate-4.2.0-py3-none-any.whl (11 kB)
2025-09-28T09:21:24.08979075Z Using cached mako-1.3.10-py3-none-any.whl (78 kB)
2025-09-28T09:21:24.090916914Z Using cached markupsafe-3.0.3-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (22 kB)
2025-09-28T09:21:24.092041759Z Using cached pycparser-2.23-py3-none-any.whl (118 kB)
2025-09-28T09:21:24.387726357Z Installing collected packages: pytz, wrapt, websockets, uvloop, urllib3, uritemplate, tzdata, typing-extensions, tqdm, tenacity, structlog, sniffio, six, rapidfuzz, pyyaml, python-multipart, python-dotenv, pyparsing, pymysql, pyjwt, pygments, pycparser, pyasn1, psycopg2-binary, psycopg-binary, psycopg, protobuf, pluggy, packaging, numpy, msgpack, MarkupSafe, iniconfig, idna, hyperframe, httptools, hpack, h11, greenlet, google-crc32c, coverage, click, charset_normalizer, certifi, cachetools, annotated-types, uvicorn, typing-inspection, sqlalchemy, sentry-sdk, rsa, requests, python-dateutil, pytest, pydantic-core, pyasn1-modules, proto-plus, Mako, httplib2, httpcore, h2, grpcio, googleapis-common-protos, google-resumable-media, deprecated, cffi, anyio, watchfiles, starlette, pytest-cov, pytest-asyncio, pydantic, pandas, limits, httpx, grpcio-status, google-auth, cryptography, cachecontrol, alembic, slowapi, google-auth-httplib2, google-api-core, fastapi, google-cloud-core, google-api-python-client, google-cloud-storage, google-cloud-firestore, google-ai-generativelanguage, google-generativeai, firebase-admin
2025-09-28T09:21:39.057958815Z 
2025-09-28T09:21:39.066359976Z Successfully installed Mako-1.3.10 MarkupSafe-3.0.3 alembic-1.16.5 annotated-types-0.7.0 anyio-4.11.0 cachecontrol-0.14.3 cachetools-5.5.2 certifi-2025.8.3 cffi-2.0.0 charset_normalizer-3.4.3 click-8.3.0 coverage-7.10.7 cryptography-46.0.1 deprecated-1.2.18 fastapi-0.117.1 firebase-admin-7.1.0 google-ai-generativelanguage-0.6.15 google-api-core-2.25.1 google-api-python-client-2.183.0 google-auth-2.40.3 google-auth-httplib2-0.2.0 google-cloud-core-2.4.3 google-cloud-firestore-2.21.0 google-cloud-storage-3.4.0 google-crc32c-1.7.1 google-generativeai-0.8.5 google-resumable-media-2.7.2 googleapis-common-protos-1.70.0 greenlet-3.2.4 grpcio-1.75.1 grpcio-status-1.71.2 h11-0.16.0 h2-4.3.0 hpack-4.1.0 httpcore-1.0.9 httplib2-0.31.0 httptools-0.6.4 httpx-0.28.1 hyperframe-6.1.0 idna-3.10 iniconfig-2.1.0 limits-5.5.0 msgpack-1.1.1 numpy-2.3.3 packaging-25.0 pandas-2.3.2 pluggy-1.6.0 proto-plus-1.26.1 protobuf-5.29.5 psycopg-3.2.10 psycopg-binary-3.2.10 psycopg2-binary-2.9.10 pyasn1-0.6.1 pyasn1-modules-0.4.2 pycparser-2.23 pydantic-2.11.9 pydantic-core-2.33.2 pygments-2.19.2 pyjwt-2.10.1 pymysql-1.1.2 pyparsing-3.2.5 pytest-8.4.2 pytest-asyncio-1.2.0 pytest-cov-7.0.0 python-dateutil-2.9.0.post0 python-dotenv-1.1.1 python-multipart-0.0.20 pytz-2025.2 pyyaml-6.0.3 rapidfuzz-3.14.1 requests-2.32.5 rsa-4.9.1 sentry-sdk-2.39.0 six-1.17.0 slowapi-0.1.9 sniffio-1.3.1 sqlalchemy-2.0.43 starlette-0.48.0 structlog-25.4.0 tenacity-9.1.2 tqdm-4.67.1 typing-extensions-4.15.0 typing-inspection-0.4.1 tzdata-2025.2 uritemplate-4.2.0 urllib3-2.5.0 uvicorn-0.37.0 uvloop-0.21.0 watchfiles-1.1.0 websockets-15.0.1 wrapt-1.17.3
2025-09-28T09:21:39.072364035Z 
2025-09-28T09:21:39.072373035Z [notice] A new release of pip is available: 25.1.1 -> 25.2
2025-09-28T09:21:39.072375725Z [notice] To update, run: pip install --upgrade pip
2025-09-28T09:21:46.535292738Z ==> Uploading build...
2025-09-28T09:22:09.50184053Z ==> Uploaded in 18.9s. Compression took 4.1s
2025-09-28T09:22:09.588062518Z ==> Build successful ðŸŽ‰
2025-09-28T09:22:12.140066682Z ==> Deploying...
2025-09-28T09:22:47.971018988Z ==> Running '   cd backend && python init_db.py && uvicorn src.main:app --host 0.0.0.0 --port $PORT'
2025-09-28T09:22:51.083661444Z ðŸ”„ Initializing database...
2025-09-28T09:22:51.083687875Z âœ… Database initialized successfully!
2025-09-28T09:23:13.004460835Z /opt/render/project/src/.venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
2025-09-28T09:23:13.004479786Z * 'schema_extra' has been renamed to 'json_schema_extra'
2025-09-28T09:23:13.004484426Z   warnings.warn(message, UserWarning)
2025-09-28T09:23:13.112109782Z INFO:     Started server process [56]
2025-09-28T09:23:13.112124892Z INFO:     Waiting for application startup.
2025-09-28T09:23:13.791848528Z INFO:     Application startup complete.
2025-09-28T09:23:13.791864138Z INFO:     Uvicorn running on http://0.0.0.0:10000 (Press CTRL+C to quit)
2025-09-28T09:23:14.097524537Z No .env file found at: /opt/render/project/src/backend/.env
2025-09-28T09:23:14.097540507Z Make sure to create a .env file with your GEMINI_API_KEY
2025-09-28T09:23:14.097544517Z âœ… Gemini API key loaded successfully
2025-09-28T09:23:14.097547677Z ðŸ“Š Using model: gemini-flash-latest, temperature: 0.8
2025-09-28T09:23:14.097552177Z ðŸ’° Daily cost limit: $1.0, Monthly: $10.0
2025-09-28T09:23:14.097556227Z âœ… Gemini model 'gemini-flash-latest' configured successfully
2025-09-28T09:23:14.097560267Z âœ… AI Product Descriptions API started successfully
2025-09-28T09:23:14.097564487Z ðŸ¤– Model: gemini-flash-latest (Live mode)
2025-09-28T09:23:14.097568758Z ðŸŒ¡ï¸  Temperature: 0.8
2025-09-28T09:23:14.097572488Z âœ… API key configured - ready for AI generation
2025-09-28T09:23:14.097576178Z ðŸ’³ Credit service initialized - rate limiting enabled
2025-09-28T09:23:14.097580528Z ðŸ“‹ Subscription plans initialized
2025-09-28T09:23:14.097584938Z INFO:     127.0.0.1:38008 - "HEAD / HTTP/1.1" 404 Not Found
2025-09-28T09:23:22.814360346Z ==> Your service is live ðŸŽ‰
2025-09-28T09:23:22.917394856Z ==> 
2025-09-28T09:23:23.014965475Z ==> ///////////////////////////////////////////////////////////
2025-09-28T09:23:23.092141845Z ==> 
2025-09-28T09:23:23.175089225Z ==> Available at your primary URL https://ai-product-descriptions.onrender.com
2025-09-28T09:23:23.249584405Z ==> 
2025-09-28T09:23:23.325925094Z ==> ///////////////////////////////////////////////////////////
2025-09-28T09:23:24.710873509Z INFO:     35.247.111.159:0 - "GET / HTTP/1.1" 404 Not Found
2025-09-28T09:24:23.883613859Z WARNING:root:Invalid auth header format
2025-09-28T09:24:23.883934758Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 401 Unauthorized
2025-09-28T09:24:24.077245473Z INFO:     41.238.10.39:0 - "WebSocket /ws/payments" [accepted]
2025-09-28T09:24:24.077768887Z INFO:     connection open
2025-09-28T09:24:24.200388014Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:24.203492497Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:24:24.204991517Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:24.697788625Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:24:24.698503944Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:24.700795105Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:24:24.890387191Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:24:24.897638515Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:25.064750911Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:24:25.066474187Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:24:25.105430398Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:25.264784876Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:24:25.28030595Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:24:25.281584655Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:25.485311889Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:25.509277499Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:24:25.511676923Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:24:25.656536594Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:25.824352778Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:24:59.399482426Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/plans HTTP/1.1" 200 OK
2025-09-28T09:24:59.552585176Z INFO:     41.238.10.39:0 - "GET /api/payment/plans HTTP/1.1" 200 OK
2025-09-28T09:24:59.892441097Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:24:59.894200344Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:00.02690991Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:03.862667202Z INFO:     41.238.10.39:0 - "OPTIONS /api/payment/checkout HTTP/1.1" 200 OK
2025-09-28T09:25:04.443791119Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:25:04.445475994Z ðŸŽ¯ STEP 1: CREATE_CHECKOUT ENDPOINT CALLED
2025-09-28T09:25:04.445496775Z Request data: variant_id='1013286' success_url='https://www.productgeniepro.com/billing?success=true' cancel_url='https://www.productgeniepro.com/pricing?cancelled=true'
2025-09-28T09:25:04.445505355Z Variant ID: 1013286
2025-09-28T09:25:04.445510155Z Success URL: https://www.productgeniepro.com/billing?success=true
2025-09-28T09:25:04.445514295Z Cancel URL: https://www.productgeniepro.com/pricing?cancelled=true
2025-09-28T09:25:04.445519285Z ðŸŽ¯ STEP 2: GETTING CLIENT INFO
2025-09-28T09:25:04.445524076Z Client info: {'ip_address': '41.238.10.39', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36', 'correlation_id': 'e40fd4c7-73bd-46b2-8cdb-0478fdb8c83e'}
2025-09-28T09:25:04.445530766Z ðŸŽ¯ STEP 3: EXTRACTING AUTH DATA
2025-09-28T09:25:04.445534946Z User ID: bpR6MB3823T20EK7BEa3cs2y22u2
2025-09-28T09:25:04.445538936Z User email: ziad321hussein@gmail.com
2025-09-28T09:25:04.445543196Z ðŸŽ¯ STEP 4: VALIDATING USER
2025-09-28T09:25:04.445547416Z âœ… STEP 4 SUCCESS: User validated
2025-09-28T09:25:04.445551376Z ðŸŽ¯ STEP 5: VALIDATING VARIANT ID
2025-09-28T09:25:04.445555536Z âœ… STEP 5 SUCCESS: Variant ID validated
2025-09-28T09:25:04.445559696Z ðŸŽ¯ STEP 6: CALLING LEMON_SQUEEZY SERVICE
2025-09-28T09:25:04.445564086Z ðŸŽ¯ LEMON SQUEEZY PAYLOAD DEBUG ðŸŽ¯
2025-09-28T09:25:04.445568257Z === VARIABLES ===
2025-09-28T09:25:04.445572487Z Variant ID: 1013286
2025-09-28T09:25:04.445576677Z Store ID: 224253
2025-09-28T09:25:04.445580657Z User ID: bpR6MB3823T20EK7BEa3cs2y22u2
2025-09-28T09:25:04.445584857Z User Email: ziad321hussein@gmail.com
2025-09-28T09:25:04.445589017Z Success URL: https://www.productgeniepro.com/billing?success=true
2025-09-28T09:25:04.445593397Z Cancel URL: https://www.productgeniepro.com/pricing?cancelled=true
2025-09-28T09:25:04.445597387Z Test Mode: True
2025-09-28T09:25:04.445601638Z === PAYLOAD BEING SENT ===
2025-09-28T09:25:04.445624418Z {
2025-09-28T09:25:04.445627518Z   "data": {
2025-09-28T09:25:04.445630388Z     "type": "checkouts",
2025-09-28T09:25:04.445633048Z     "attributes": {
2025-09-28T09:25:04.445635538Z       "checkout_options": {
2025-09-28T09:25:04.445637999Z         "embed": false,
2025-09-28T09:25:04.445640768Z         "media": false
2025-09-28T09:25:04.445643249Z       },
2025-09-28T09:25:04.445645859Z       "checkout_data": {
2025-09-28T09:25:04.445648299Z         "email": "ziad321hussein@gmail.com",
2025-09-28T09:25:04.445650909Z         "custom": {
2025-09-28T09:25:04.445654189Z           "user_id": "bpR6MB3823T20EK7BEa3cs2y22u2"
2025-09-28T09:25:04.445657089Z         }
2025-09-28T09:25:04.445659759Z       },
2025-09-28T09:25:04.445662409Z       "product_options": {
2025-09-28T09:25:04.445665019Z         "redirect_url": "https://www.productgeniepro.com/billing?success=true"
2025-09-28T09:25:04.445667839Z       }
2025-09-28T09:25:04.445670439Z     },
2025-09-28T09:25:04.445673029Z     "relationships": {
2025-09-28T09:25:04.445675549Z       "store": {
2025-09-28T09:25:04.44567806Z         "data": {
2025-09-28T09:25:04.44568063Z           "type": "stores",
2025-09-28T09:25:04.44568327Z           "id": "224253"
2025-09-28T09:25:04.44568596Z         }
2025-09-28T09:25:04.44568856Z       },
2025-09-28T09:25:04.44569108Z       "variant": {
2025-09-28T09:25:04.4456937Z         "data": {
2025-09-28T09:25:04.4456962Z           "type": "variants",
2025-09-28T09:25:04.4456987Z           "id": "1013286"
2025-09-28T09:25:04.44570116Z         }
2025-09-28T09:25:04.44570365Z       }
2025-09-28T09:25:04.44570614Z     }
2025-09-28T09:25:04.44570863Z   }
2025-09-28T09:25:04.44571139Z }
2025-09-28T09:25:04.44571391Z === HEADERS ===
2025-09-28T09:25:04.44571649Z {
2025-09-28T09:25:04.445720981Z   "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI5NGQ1OWNlZi1kYmI4LTRlYTUtYjE3OC1kMjU0MGZjZDY5MTkiLCJqdGkiOiJkOGY2NTljZjdhMzA3ZGNjM2RjNTk4ZjNiMzU4YTk3YTczYzdhNGJkNDg2ZDlkM2JhYTE4OGQ4Y2MxMGU1Zjc5YWQzODJkZTgyYjgxNjRiNiIsImlhdCI6MTc1ODgyNzU5MC41NzYwMjcsIm5iZiI6MTc1ODgyNzU5MC41NzYwMjksImV4cCI6MjA3NDM2MDM5MC41NjA2NzcsInN1YiI6IjU1NzE5NjQiLCJzY29wZXMiOltdfQ.v6DQ8CrPGAovPSiYrv6Y3GkQ3DWHPcC0aAiZ9mP5BsXCwXoz5Kf1OY-fLAHC4ikcmx2RYZuLbSrF_Xxa4mvw2exFnJMsODiiuzItzhdVGUwR89IzbFAD6hcto-w0ERT3gjP781BJ-lxa7pzC4tCADeRhAtMPM7MZ7h7g-0JsRjXyNDrM0ArKoN84kiGHojmPCBomBuXTQ-mC_VQEWn8PKxTbZEem7FoyP4ydK46xYQu-naukuPTOZHRQ44Mdz_16JQ7Cda2pbfJo2osSPGaLTYUKvH0-aF2jlZToxGCPPr8LbPsHo1-96W2D6CBkCF0kFd6BQd0PKw64X-2ywolNwyna51cLKvkZuOHrh2Z8XVG0GONxeo6b1mFzgs8PzSkaPJ5Er_vhcRQVhAolOVmBHcZ61FUUJ208hR1FUVzMHlrTWtcTAi6HUjthHZB2ZL0xrIkDcWQPxG38i8ArAslXFLytqDTU3tePixq0WDHHBnBq8XSbleFoLH8rdc0j4v5KEPoJyXUS7MrHkiJ602WwLFPuczEdkRPvnSNeRKhsSlPkO8SiQFdHZ6VLCGQoEWDvm7SL2U6lmOJ2T1imOAGiTveGoliycICl_HQo29Fk0VFMFVa_jei7HCgdsLArClUHceqfx5UTOsrWxcd8zr75ALBqDzIWT9tpG5ifdTappes",
2025-09-28T09:25:04.445724081Z   "Accept": "application/vnd.api+json",
2025-09-28T09:25:04.445726981Z   "Content-Type": "application/vnd.api+json",
2025-09-28T09:25:04.445729461Z   "Version": "2021-07-07"
2025-09-28T09:25:04.445731911Z }
2025-09-28T09:25:04.445734511Z === API ENDPOINT ===
2025-09-28T09:25:04.445737371Z POST https://api.lemonsqueezy.com/v1/checkouts
2025-09-28T09:25:04.445740211Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:04.543849253Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:04.611573692Z === RESPONSE ===
2025-09-28T09:25:04.611593933Z Status: Unknown
2025-09-28T09:25:04.611597153Z Response: {
2025-09-28T09:25:04.611599953Z   "jsonapi": {
2025-09-28T09:25:04.611619043Z     "version": "1.0"
2025-09-28T09:25:04.611622403Z   },
2025-09-28T09:25:04.611625283Z   "links": {
2025-09-28T09:25:04.611629354Z     "self": "https://api.lemonsqueezy.com/v1/checkouts/88918019-856b-4ff3-9cb4-18dbe6ff9ac9"
2025-09-28T09:25:04.611632154Z   },
2025-09-28T09:25:04.611635024Z   "data": {
2025-09-28T09:25:04.611637634Z     "type": "checkouts",
2025-09-28T09:25:04.611640954Z     "id": "88918019-856b-4ff3-9cb4-18dbe6ff9ac9",
2025-09-28T09:25:04.611643604Z     "attributes": {
2025-09-28T09:25:04.611646764Z       "store_id": 224253,
2025-09-28T09:25:04.611650104Z       "variant_id": 1013286,
2025-09-28T09:25:04.611653434Z       "custom_price": null,
2025-09-28T09:25:04.611656224Z       "product_options": {
2025-09-28T09:25:04.611659004Z         "name": "",
2025-09-28T09:25:04.611661684Z         "description": "",
2025-09-28T09:25:04.611664555Z         "media": [],
2025-09-28T09:25:04.611667975Z         "redirect_url": "https://www.productgeniepro.com/billing?success=true",
2025-09-28T09:25:04.611671745Z         "receipt_button_text": "",
2025-09-28T09:25:04.611674375Z         "receipt_link_url": "",
2025-09-28T09:25:04.611677005Z         "receipt_thank_you_note": "",
2025-09-28T09:25:04.611679775Z         "enabled_variants": [],
2025-09-28T09:25:04.611682345Z         "confirmation_title": "",
2025-09-28T09:25:04.611684925Z         "confirmation_message": "",
2025-09-28T09:25:04.611687355Z         "confirmation_button_text": ""
2025-09-28T09:25:04.611689815Z       },
2025-09-28T09:25:04.611692115Z       "checkout_options": {
2025-09-28T09:25:04.611694516Z         "embed": false,
2025-09-28T09:25:04.611697176Z         "media": false,
2025-09-28T09:25:04.611699945Z         "logo": true,
2025-09-28T09:25:04.611702746Z         "desc": true,
2025-09-28T09:25:04.611705436Z         "discount": true,
2025-09-28T09:25:04.611708096Z         "skip_trial": false,
2025-09-28T09:25:04.611710926Z         "quantity": 1,
2025-09-28T09:25:04.611713546Z         "subscription_preview": true,
2025-09-28T09:25:04.611716056Z         "locale": "en"
2025-09-28T09:25:04.611719076Z       },
2025-09-28T09:25:04.611721766Z       "checkout_data": {
2025-09-28T09:25:04.611724536Z         "email": "ziad321hussein@gmail.com",
2025-09-28T09:25:04.611727356Z         "name": "",
2025-09-28T09:25:04.611730056Z         "billing_address": [],
2025-09-28T09:25:04.611732657Z         "tax_number": "",
2025-09-28T09:25:04.611735077Z         "discount_code": "",
2025-09-28T09:25:04.611737437Z         "custom": {
2025-09-28T09:25:04.611739867Z           "user_id": "bpR6MB3823T20EK7BEa3cs2y22u2"
2025-09-28T09:25:04.611742457Z         },
2025-09-28T09:25:04.611745437Z         "variant_quantities": []
2025-09-28T09:25:04.611748117Z       },
2025-09-28T09:25:04.611750757Z       "preview": false,
2025-09-28T09:25:04.611753177Z       "expires_at": null,
2025-09-28T09:25:04.611755927Z       "created_at": "2025-09-28T09:25:04.000000Z",
2025-09-28T09:25:04.611758397Z       "updated_at": "2025-09-28T09:25:04.000000Z",
2025-09-28T09:25:04.611761077Z       "test_mode": true,
2025-09-28T09:25:04.611768947Z       "url": "https://product-genie.lemonsqueezy.com/checkout/custom/88918019-856b-4ff3-9cb4-18dbe6ff9ac9?signature=de843f3a70a6201686ed4759dc4dfdccdd09630dcfc644ad47d53c0e9da8f279"
2025-09-28T09:25:04.611771687Z     },
2025-09-28T09:25:04.611774258Z     "relationships": {
2025-09-28T09:25:04.611776738Z       "store": {
2025-09-28T09:25:04.611779158Z         "links": {
2025-09-28T09:25:04.611782348Z           "related": "https://api.lemonsqueezy.com/v1/checkouts/88918019-856b-4ff3-9cb4-18dbe6ff9ac9/store",
2025-09-28T09:25:04.611791538Z           "self": "https://api.lemonsqueezy.com/v1/checkouts/88918019-856b-4ff3-9cb4-18dbe6ff9ac9/relationships/store"
2025-09-28T09:25:04.611794738Z         }
2025-09-28T09:25:04.611797828Z       },
2025-09-28T09:25:04.611799788Z       "variant": {
2025-09-28T09:25:04.611801468Z         "links": {
2025-09-28T09:25:04.611803208Z           "related": "https://api.lemonsqueezy.com/v1/checkouts/88918019-856b-4ff3-9cb4-18dbe6ff9ac9/variant",
2025-09-28T09:25:04.611804948Z           "self": "https://api.lemonsqueezy.com/v1/checkouts/88918019-856b-4ff3-9cb4-18dbe6ff9ac9/relationships/variant"
2025-09-28T09:25:04.611806639Z         }
2025-09-28T09:25:04.611808288Z       }
2025-09-28T09:25:04.611810008Z     },
2025-09-28T09:25:04.611811699Z     "links": {
2025-09-28T09:25:04.611813489Z       "self": "https://api.lemonsqueezy.com/v1/checkouts/88918019-856b-4ff3-9cb4-18dbe6ff9ac9"
2025-09-28T09:25:04.611815129Z     }
2025-09-28T09:25:04.611816799Z   }
2025-09-28T09:25:04.611818469Z }
2025-09-28T09:25:04.611820249Z âœ… STEP 6 SUCCESS: Lemon Squeezy service call successful
2025-09-28T09:25:04.611823769Z Result: {'success': True, 'checkout_url': 'https://product-genie.lemonsqueezy.com/checkout/custom/88918019-856b-4ff3-9cb4-18dbe6ff9ac9?signature=de843f3a70a6201686ed4759dc4dfdccdd09630dcfc644ad47d53c0e9da8f279', 'checkout_id': '88918019-856b-4ff3-9cb4-18dbe6ff9ac9'}
2025-09-28T09:25:04.611825649Z INFO:     41.238.10.39:0 - "POST /api/payment/checkout HTTP/1.1" 200 OK
2025-09-28T09:25:04.83566578Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:25:04.837600621Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:04.946798159Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:06.891011718Z INFO:     connection closed
2025-09-28T09:25:49.404420903Z WARNING:security:{"event_type": "webhook_received", "user_id": null, "timestamp": "2025-09-28T09:25:49.404165+00:00", "ip_address": null, "user_agent": null, "event_data": {"signature_provided": true, "signature_valid": true}, "security_level": "high", "success": true, "error_message": null, "session_id": null, "correlation_id": null}
2025-09-28T09:25:49.409849998Z ERROR:src.payments.lemon_squeezy:Error processing webhook: 'order_created' is not a valid WebhookEventType
2025-09-28T09:25:49.409872449Z ERROR:src.payments.endpoints:Webhook processing failed: 'order_created' is not a valid WebhookEventType
2025-09-28T09:25:49.409963031Z WARNING:src.payments.security:AUDIT: webhook_verification_failed - User: None - Success: False - Security Level: high - IP: 18.116.135.47
2025-09-28T09:25:49.410054644Z WARNING:security:{"event_type": "webhook_verification_failed", "user_id": null, "timestamp": "2025-09-28T09:25:49.409854+00:00", "ip_address": "18.116.135.47", "user_agent": "LemonSqueezy-Hookshot", "event_data": {"error": "'order_created' is not a valid WebhookEventType"}, "security_level": "high", "success": false, "error_message": "'order_created' is not a valid WebhookEventType", "session_id": null, "correlation_id": "3f875e9c-f67c-4cb0-9e41-f421b3232ae6"}
2025-09-28T09:25:49.410596578Z INFO:     18.116.135.47:0 - "POST /api/payment/webhook HTTP/1.1" 400 Bad Request
2025-09-28T09:25:53.406178711Z INFO:     41.238.10.39:0 - "WebSocket /ws/payments" [accepted]
2025-09-28T09:25:53.406203542Z INFO:     connection open
2025-09-28T09:25:53.674414228Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:25:53.67674713Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:53.700467494Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:53.853076521Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:25:53.855869566Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:53.890522972Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:54.043410417Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:25:54.04502227Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:54.239105625Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:54.416491004Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:54.545992135Z WARNING:security:{"event_type": "webhook_received", "user_id": null, "timestamp": "2025-09-28T09:25:54.544051+00:00", "ip_address": null, "user_agent": null, "event_data": {"signature_provided": true, "signature_valid": true}, "security_level": "high", "success": true, "error_message": null, "session_id": null, "correlation_id": null}
2025-09-28T09:25:54.548536492Z ERROR:src.payments.lemon_squeezy:Error processing webhook: 'order_created' is not a valid WebhookEventType
2025-09-28T09:25:54.548549993Z ERROR:src.payments.endpoints:Webhook processing failed: 'order_created' is not a valid WebhookEventType
2025-09-28T09:25:54.548575873Z WARNING:src.payments.security:AUDIT: webhook_verification_failed - User: None - Success: False - Security Level: high - IP: 18.116.135.47
2025-09-28T09:25:54.548682196Z WARNING:security:{"event_type": "webhook_verification_failed", "user_id": null, "timestamp": "2025-09-28T09:25:54.548511+00:00", "ip_address": "18.116.135.47", "user_agent": "LemonSqueezy-Hookshot", "event_data": {"error": "'order_created' is not a valid WebhookEventType"}, "security_level": "high", "success": false, "error_message": "'order_created' is not a valid WebhookEventType", "session_id": null, "correlation_id": "c4f9af56-1acb-4ee7-a9c5-0ac55f4fb0be"}
2025-09-28T09:25:54.549137419Z INFO:     18.116.135.47:0 - "POST /api/payment/webhook HTTP/1.1" 400 Bad Request
2025-09-28T09:25:54.581185125Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:58.245287391Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:25:58.884778626Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:25:58.886575474Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:25:58.916860933Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:26:01.972813741Z INFO:     41.238.10.39:0 - "GET /api/payment/plans HTTP/1.1" 200 OK
2025-09-28T09:26:02.51812647Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:26:02.519722802Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:26:02.620079634Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:26:02.858629577Z WARNING:src.payments.endpoints:User bpR6MB3823T20EK7BEa3cs2y22u2 has no subscription record, returning free tier
2025-09-28T09:26:02.86023749Z INFO:     41.238.10.39:0 - "GET /api/payment/user/subscription HTTP/1.1" 200 OK
2025-09-28T09:26:02.980899104Z INFO:     41.238.10.39:0 - "GET /api/payment/user/credits HTTP/1.1" 200 OK
2025-09-28T09:26:19.679222173Z WARNING:security:{"event_type": "webhook_received", "user_id": null, "timestamp": "2025-09-28T09:26:19.678958+00:00", "ip_address": null, "user_agent": null, "event_data": {"signature_provided": true, "signature_valid": true}, "security_level": "high", "success": true, "error_message": null, "session_id": null, "correlation_id": null}
2025-09-28T09:26:19.683414605Z ERROR:src.payments.lemon_squeezy:Error processing webhook: 'order_created' is not a valid WebhookEventType
2025-09-28T09:26:19.683445096Z ERROR:src.payments.endpoints:Webhook processing failed: 'order_created' is not a valid WebhookEventType
2025-09-28T09:26:19.683536168Z WARNING:src.payments.security:AUDIT: webhook_verification_failed - User: None - Success: False - Security Level: high - IP: 18.116.135.47
2025-09-28T09:26:19.68358096Z WARNING:security:{"event_type": "webhook_verification_failed", "user_id": null, "timestamp": "2025-09-28T09:26:19.683407+00:00", "ip_address": "18.116.135.47", "user_agent": "LemonSqueezy-Hookshot", "event_data": {"error": "'order_created' is not a valid WebhookEventType"}, "security_level": "high", "success": false, "error_message": "'order_created' is not a valid WebhookEventType", "session_id": null, "correlation_id": "e4a4a473-1ece-48d1-b05d-d8570a90c6bd"}
2025-09-28T09:26:19.684098883Z INFO:     18.116.135.47:0 - "POST /api/payment/webhook HTTP/1.1" 400 Bad Request
2025-09-28T09:26:21.454881943Z WARNING:security:{"event_type": "webhook_received", "user_id": null, "timestamp": "2025-09-28T09:26:21.454644+00:00", "ip_address": null, "user_agent": null, "event_data": {"signature_provided": true, "signature_valid": true}, "security_level": "high", "success": true, "error_message": null, "session_id": null, "correlation_id": null}
2025-09-28T09:26:21.459554138Z WARNING:src.payments.lemon_squeezy:Unknown variant_id: 1013286
2025-09-28T09:26:21.459566918Z ERROR:src.payments.lemon_squeezy:Unknown variant_id 1013286 in subscription update
2025-09-28T09:26:21.460152374Z INFO:     18.116.135.47:0 - "POST /api/payment/webhook HTTP/1.1" 200 OK